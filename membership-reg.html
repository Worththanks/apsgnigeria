<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APC Progressive Support Group (APSG) Membership Registration | 2027 and Beyond</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <!-- Favicon (added multiple sizes for better mobile/browser support without affecting colors) -->
  <link rel="icon" href="/assets/images/apsg.png" sizes="any" />
  <link rel="apple-touch-icon" href="/assets/images/apsg.png" />
  
    
    <!-- Supabase CDN (must be in head, before your script) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Your form handler -->
    <script defer src="supabase-clients.js"></script>
    
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f8f9fa; }
        .hero {
            background: linear-gradient(rgba(0,51,160,0.85), rgba(0,100,0,0.85)), url('/assets/images/reg-hero.webp') center/cover;
            color: white;
            padding: 120px 0 200px;
            text-align: center;
        }
        .form-section { background: white; border-radius: 15px; box-shadow: 0 0 20px rgba(0,0,0,0.1); padding: 1.5rem; }
        .btn-apc { background: #006400; border: none; }
        .btn-apc:hover { background: #004d00; }
        .file-note, .loading-note { font-size: 0.875rem; color: #6c757d; }
        .loading-note { color: #006400; font-weight: bold; }
        @media (max-width: 576px) {
            .hero { padding: 80px 0 150px; }
            .display-3 { font-size: 2.5rem; }
            .form-section { padding: 1rem; }
        }
    </style>
</head>
<body>

<!-- Registration Form -->
<section class="py-5 position-relative" style="background: radial-gradient(circle at top, #f1f4ff 0%, #eef2ff 45%, #f7f9fc 100%);">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-xl-8 col-lg-9 col-12">
                <div class="card border-0 shadow-lg rounded-4 overflow-hidden" style="backdrop-filter: blur(6px);">
                    <div class="card-header text-center text-white py-5 position-relative overflow-hidden"
                         style="background: linear-gradient(135deg, #0033A0 0%, #006400 40%, #640f00 100%);">
                        <div class="position-absolute top-0 start-0 w-100 h-100 opacity-10"
                             style="background-image: repeating-linear-gradient(45deg, rgba(255,255,255,0.15), rgba(255,255,255,0.15) 1px, transparent 1px, transparent 8px);"></div>
                        <span class="badge bg-light text-primary px-4 py-3 rounded-pill fw-semibold mb-3">Official Progressive Support Group (APSG) Verification</span>
                        <h2 class="fw-bold mb-1 fs-2">Submit Your Details for APSG Verification</h2>
                    </div>

                    <div class="card-body p-4 bg-white">
                        
                        <p class="text-center text-muted mb-5 lead">
                            All information provided is used strictly for  
                            <strong class="text-primary">official APSG membership verification</strong>.
                            As required by the All Progressives Congress (APC), provide these details for official identification and mobilization. Your data is confidential.
                        </p>
                        
                        <div id="lagosNote" class="alert alert-warning small mt-3" style="display:none;">
                            <strong>Lagos State:</strong> Select your exact LGA or LCDA (all 57 shown). Wards loaded from parent LGA.
                        </div>

                        <form id="regForm">
                            <div class="mb-3">
                                <label for="fullName" class="form-label">Full Name *</label>
                                <input type="text" class="form-control" id="fullName" name="fullName" placeholder="e.g., Adejoke Ikechukwu" required autocomplete="name" autocapitalize="words">
                            </div>

                            <div class="mb-3">
                                <label for="phone" class="form-label">Phone Number (WhatsApp preferred) *</label>
                                <input type="tel" class="form-control" id="phone" name="phone" placeholder="+2348012345678" inputmode="tel" required autocomplete="tel">
                            </div>

                            <div class="mb-3">
                                <label for="email" class="form-label">Email Address</label>
                                <input type="email" class="form-control" id="email" name="email" placeholder="yourname@example.com" autocomplete="email">
                            </div>

                            <div class="row g-3">
                                <div class="col-md-4 col-12">
                                    <label for="state" class="form-label">State of Residence *</label>
                                    <select class="form-select" id="state" name="state" required>
                                        <option value="">Select State</option>
                                        <option value="Abia">Abia</option>
                                        <option value="Adamawa">Adamawa</option>
                                        <option value="Akwa Ibom">Akwa Ibom</option>
                                        <option value="Anambra">Anambra</option>
                                        <option value="Bauchi">Bauchi</option>
                                        <option value="Bayelsa">Bayelsa</option>
                                        <option value="Benue">Benue</option>
                                        <option value="Borno">Borno</option>
                                        <option value="Cross River">Cross River</option>
                                        <option value="Delta">Delta</option>
                                        <option value="Ebonyi">Ebonyi</option>
                                        <option value="Edo">Edo</option>
                                        <option value="Ekiti">Ekiti</option>
                                        <option value="Enugu">Enugu</option>
                                        <option value="Gombe">Gombe</option>
                                        <option value="Imo">Imo</option>
                                        <option value="Jigawa">Jigawa</option>
                                        <option value="Kaduna">Kaduna</option>
                                        <option value="Kano">Kano</option>
                                        <option value="Katsina">Katsina</option>
                                        <option value="Kebbi">Kebbi</option>
                                        <option value="Kogi">Kogi</option>
                                        <option value="Kwara">Kwara</option>
                                        <option value="Lagos">Lagos</option>
                                        <option value="Nasarawa">Nasarawa</option>
                                        <option value="Niger">Niger</option>
                                        <option value="Ogun">Ogun</option>
                                        <option value="Ondo">Ondo</option>
                                        <option value="Osun">Osun</option>
                                        <option value="Oyo">Oyo</option>
                                        <option value="Plateau">Plateau</option>
                                        <option value="Rivers">Rivers</option>
                                        <option value="Sokoto">Sokoto</option>
                                        <option value="Taraba">Taraba</option>
                                        <option value="Yobe">Yobe</option>
                                        <option value="Zamfara">Zamfara</option>
                                        <option value="FCT">Federal Capital Territory (FCT)</option>
                                    </select>
                               </div>

                                <div class="col-md-4 col-12">
                                    <label for="lga" class="form-label">Local Government Area *</label>
                                    <select class="form-select" id="lga" name="lga" disabled required>
                                        <option value="">Select LGA/LCDA</option>
                                    </select>
                                    <div class="loading-note mt-1" id="lga-loading">Loading LGAs...</div>
                                </div>

                                <div class="col-md-4 col-12">
                                    <label for="ward" class="form-label">Ward *</label>
                                    <select class="form-select" id="ward" name="ward" disabled required>
                                        <option value="">Select Ward</option>
                                    </select>
                                    <div class="loading-note mt-1" id="ward-loading"></div>
                                </div>
                            </div>

                            <div class="mb-3 mt-4">
                                <label for="pvc" class="form-label">Permanent Voter's Card Number (VIN) *</label>
                                <input type="text" class="form-control" id="pvc" name="pvc" placeholder="e.g., 1234567890123456789" required>
                            </div>

                            <div class="mb-3">
                                <label for="apcCard" class="form-label">APC Membership Card Number *</label>
                                <input type="text" class="form-control" id="apcCard" name="apcCard" required>
                            </div>

                            <div class="mb-3">
                                <label for="pvcUpload" class="form-label">Upload Your PVC (Optional - Recommended)</label>
                                <input type="file" class="form-control" id="pvcUpload" name="pvcUpload" accept="image/*,application/pdf">
                                <div class="file-note mt-1">Clear photo or scan (JPEG, PNG, PDF). Max 5MB.</div>
                            </div>

                            <div class="mb-3">
                                <label for="apcUpload" class="form-label">Upload Your APC Membership Card (Optional - Recommended)</label>
                                <input type="file" class="form-control" id="apcUpload" name="apcUpload" accept="image/*,application/pdf">
                                <div class="file-note mt-1">Clear photo or scan (JPEG, PNG, PDF). Max 5MB.</div>
                            </div>

                            <div class="form-check mb-4">
                                <input class="form-check-input" type="checkbox" id="consent" name="consent" required>
                                <label class="form-check-label small" for="consent">
                                    I consent to APC Progressive Support Group APSG/All Progressives Congress (APC) using my details (including uploads) for official membership verification and mobilization only. Data is confidential.
                                </label>
                            </div>

                            <button type="submit" class="btn btn-apc btn-lg w-100 text-white">
                                <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true" style="display:none;"></span>
                                Submit & Join APSG
                            </button>
                        </form>

                        <div id="formMessage" class="mt-3"></div>

                        <p class="text-center mt-4 small text-muted">
                            For questions or upload issues, WhatsApp: +2348023154308
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    

    <!-- Dynamic Location Data Script (Local JSON + Lagos 57) -->
    <script>
        let nigeriaData = null;
        const stateSelect = document.getElementById('state');
        const lgaSelect = document.getElementById('lga');
        const wardSelect = document.getElementById('ward');
        const lgaLoading = document.getElementById('lga-loading');
        const wardLoading = document.getElementById('ward-loading');
        const lagosNote = document.getElementById('lagosNote');

        // All 57 Lagos councils (sorted)
        const lagosAll = [
            "Agege", "Orile-Agege", "Ajeromi-Ifelodun", "Ifelodun", "Alimosho", "Agbado/Oke-Odo", "Ayobo/Ipaja", "Egbe-Idimu", "Igando-Ikotun", "Mosan-Okunola",
            "Amuwo-Odofin", "Oriade", "Apapa", "Apapa-Iganmu", "Badagry", "Badagry West", "Oto-Awori", "Olorunda", "Epe", "Eredo",
            "Eti-Osa", "Eti-Osa East", "Eti-Osa West", "Iru/Victoria Island", "Ikoyi-Obalende", "Lekki", "Ibeju-Lekki",
            "Ifako-Ijaiye", "Ojodu", "Ojokoro", "Ikeja", "Onigbongbo", "Ikorodu", "Igbogbo-Bayeku", "Ijede", "Imota", "Ikorodu North", "Ikorodu West",
            "Kosofe", "Agboyi-Ketu", "Ikosi-Isheri", "Lagos Island", "Lagos Island East", "Lagos Mainland", "Yaba", "Mushin", "Odi-Olowo/Ojuwoye",
            "Ojo", "Iba", "Oshodi-Isolo", "Ejigbo", "Isolo", "Shomolu", "Bariga", "Surulere", "Coker-Aguda", "Itire-Ikate"
        ].sort();

        // Mapping LCDA to parent official LGA
        const lagosMapping = {
            "Orile-Agege": "Agege",
            "Ifelodun": "Ajeromi-Ifelodun",
            "Agbado/Oke-Odo": "Alimosho",
            "Ayobo/Ipaja": "Alimosho",
            "Egbe-Idimu": "Alimosho",
            "Igando-Ikotun": "Alimosho",
            "Mosan-Okunola": "Alimosho",
            "Oriade": "Amuwo-Odofin",
            "Apapa-Iganmu": "Apapa",
            "Badagry West": "Badagry",
            "Oto-Awori": "Badagry",
            "Olorunda": "Badagry",
            "Eredo": "Epe",
            "Eti-Osa East": "Eti-Osa",
            "Eti-Osa West": "Eti-Osa",
            "Iru/Victoria Island": "Eti-Osa",
            "Ikoyi-Obalende": "Eti-Osa",
            "Lekki": "Eti-Osa",
            "Ojodu": "Ifako-Ijaiye",
            "Ojokoro": "Ifako-Ijaiye",
            "Onigbongbo": "Ikeja",
            "Igbogbo-Bayeku": "Ikorodu",
            "Ijede": "Ikorodu",
            "Imota": "Ikorodu",
            "Ikorodu North": "Ikorodu",
            "Ikorodu West": "Ikorodu",
            "Agboyi-Ketu": "Kosofe",
            "Ikosi-Isheri": "Kosofe",
            "Lagos Island East": "Lagos Island",
            "Yaba": "Lagos Mainland",
            "Odi-Olowo/Ojuwoye": "Mushin",
            "Iba": "Ojo",
            "Ejigbo": "Oshodi-Isolo",
            "Isolo": "Oshodi-Isolo",
            "Bariga": "Shomolu",
            "Coker-Aguda": "Surulere",
            "Itire-Ikate": "Surulere"
        };

        // Fetch local JSON (place lgas-with-wards.json in /assets/files/ on your server)
        fetch('/assets/files/lgas-with-wards.json')
            .then(response => {
                if (!response.ok) throw new Error('File not found');
                return response.json();
            })
            .then(data => {
                nigeriaData = data;
                lgaLoading.textContent = '';
            })
            .catch(err => {
                lgaLoading.textContent = 'Error loading local data â€“ check file path';
                console.error(err);
            });

        stateSelect.addEventListener('change', () => {
            const selectedState = stateSelect.value;
            lgaSelect.innerHTML = '<option value="">Select LGA/LCDA</option>';
            wardSelect.innerHTML = '<option value="">Select Ward</option>';
            lgaSelect.disabled = true;
            wardSelect.disabled = true;
            wardLoading.textContent = 'Select LGA/LCDA first';
            lagosNote.style.display = 'none';

            if (selectedState && nigeriaData) {
                let lgas = [];
                if (selectedState === 'Lagos') {
                    lgas = lagosAll;
                    lagosNote.style.display = 'block';
                } else if (nigeriaData[selectedState]) {
                    lgas = Object.keys(nigeriaData[selectedState]).sort();
                }

                lgas.forEach(name => {
                    const option = document.createElement('option');
                    option.value = name;
                    option.textContent = name;
                    lgaSelect.appendChild(option);
                });
                lgaSelect.disabled = false;
                lgaLoading.textContent = '';
            }
        });

        lgaSelect.addEventListener('change', () => {
            const selectedState = stateSelect.value;
            let selectedLga = lgaSelect.value;
            wardSelect.innerHTML = '<option value="">Select Ward</option>';
            wardSelect.disabled = true;
            wardLoading.textContent = 'Loading wards...';

            if (selectedState && selectedLga && nigeriaData && nigeriaData[selectedState]) {
                let parentLga = selectedLga;
                if (selectedState === 'Lagos' && lagosMapping[selectedLga]) {
                    parentLga = lagosMapping[selectedLga];
                }

                if (nigeriaData[selectedState][parentLga]) {
                    const wards = nigeriaData[selectedState][parentLga]
                        .map(w => w.name)
                        .sort();
                    wards.forEach(ward => {
                        const option = document.createElement('option');
                        option.value = ward;
                        option.textContent = ward;
                        wardSelect.appendChild(option);
                    });
                    wardSelect.disabled = false;
                    wardLoading.textContent = '';
                } else {
                    wardLoading.textContent = 'No wards found';
                }
            }
        });
    </script>


</Script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Shared Supabase Auth & Client -->
    <script src="/supabase-clients.js"></script>
</body>
    
</body>
</html>